<link rel="import" href="../../bower_components/polymer/polymer-element.html">
<link rel="import" href="../../bower_components/paper-tabs/paper-tabs.html">
<link rel="import" href="../../bower_components/iron-pages/iron-pages.html">
<link rel="import" href="../../bower_components/font-roboto/roboto.html">

<link rel="import" href="../ck-quotepage/ck-quotepage.html">

<!--<link rel="import" href="../../bower_components/polymer/lib/elements/dom-if.html">-->
<!--<link rel="import" href="../../bower_components/polymer/lib/elements/dom-repeat.html">-->

<dom-module id="quote_center-app">
  <template>
    <style>
      :host {
        font: 1.1em 'Roboto', sans-serif;
        font-weight: 300;
        text-shadow: 0 0 3px var(--paper-green-700);
        line-height: 1.5em;
        color: #eae6e6;
        -moz-user-select: none;
        -ms-user-select: none;
        -webkit-user-select: none;
        user-select: none;
        cursor: default;

        --paper-tabs-content: {
          font: 1.1em 'Roboto', sans-serif;
          font-weight: 300;
        }

        --paper-tabs-selection-bar-color: var(--paper-green-a700);
        width: 50%;
      }

      @media (max-width: 1024px) {
        :host {
          width: 100%;
        }
      }

    </style>

    <header>
      <paper-tabs selected={{selected}} noink>
        <template is="dom-repeat" items="{{pages}}">
          <paper-tab>{{_tabName(item.tabName)}}</paper-tab>
        </template>
      </paper-tabs>
    </header>

    <iron-pages selected="{{selected}}">
      <template is="dom-repeat" items="{{pages}}">
        <ck-quotepage
          app-storage-key="{{storageKey(item.storageKey)}}"
          data-url$="{{dataUrl(item.dataUrl)}}"
        ></ck-quotepage>
      </template>
    </iron-pages>

    <footer>
      Jim Rohn quotes, collect from multiple sources.
    </footer>

  </template>

  <script>
    /** @polymerElement */
    class Quote_centerApp extends Polymer.Element {
      static get is() { return 'quote_center-app'; }
      static get properties() {
        return {
          pages: {
            type: Array,
            value: [
              {
                tabName: "Quote for the day",
                storageKey: "JimRohn",
                dataUrl: "JimRohn.json"
              }
            ]
          },

          selected: {
            type: Number,
            value: 0
          }
        };
      }

      dataUrl(url) {
        return "/data/" + url;
      }

      storageKey(storageKey) {
        var prefix = "cara-iu-vau";
        var sanitizeStorageKey = storageKey.replace(/\s/, '');
        return prefix + "-" + sanitizeStorageKey;
      }

      _tabName(tabName) {
        return tabName + " " + this._randEmoji();
      }

      _randEmoji() {
        var emojis = [
          '😃', '👻', '💄', '👋', '🔥', '🌈', '🌪', '🍺', '🚀', '⛏'
        ]

        var index = Math.floor(Math.random() * emojis.length);
        return emojis[index];
      }
    }

    window.customElements.define(Quote_centerApp.is, Quote_centerApp);
  </script>
</dom-module>
