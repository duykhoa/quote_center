<link rel="import" href="../../bower_components/polymer/polymer-element.html">
<link rel="import" href="../../bower_components/iron-ajax/iron-ajax.html">
<link rel="import" href="../../bower_components/app-storage/app-indexeddb-mirror/app-indexeddb-mirror.html">
<!--<link rel="import" href="../../bower_components/polymer/lib/elements/dom-if.html">-->
<!--<link rel="import" href="../../bower_components/polymer/lib/elements/dom-repeat.html">-->

<dom-module id="quote_center-app">
  <template>
    <style>
      :host {
        display: block;
        font: 1.1em Courier, sans-serif;
        width: 50%;
        text-align: justify;
        line-height: 1.5em;
        text-shadow: -1px 0 1px #d6d5d5, -2px 0 0 #eaeaea;
        color: #505050;
      }

      div {
        padding: 8px 0;
      }

      footer {
        opacity: 0.4;
        font-size: 0.8em;
        box-shadow: 0 -1px 0 #888;
      }

      @media (max-width: 1024px) {
        :host {
          width: 100%;
        }
      }

    </style>

    <iron-ajax
      auto
      url="/data/JimRohn.json"
      method="GET"
      handle-as="json"
      last-response={{quotes}}
    ></iron-ajax>

    <app-indexeddb-mirror
      key="cara-iu-vau"
      data="{{quotes}}"
      persisted-data="{{cacheQuotes}}"
      log=true
    >
    </app-indexeddb-mirror>

    <template is="dom-repeat" items={{cacheQuotes.quotes}}>
      <div>{{item.body}}</div>
    </template>

    <footer>
      Jim Rohn quotes from
      <a href="https://favqs.com/api">favqs</a>
    </footer>

  </template>

  <script>
    /** @polymerElement */
    class Quote_centerApp extends Polymer.Element {
      static get is() { return 'quote_center-app'; }
      static get properties() {
        return {
          quotes: {
            type: Array
          }
        };
      }
    }

    window.customElements.define(Quote_centerApp.is, Quote_centerApp);
  </script>
</dom-module>
